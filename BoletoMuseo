import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

/**
 * Representa un boleto de ingreso al museo.
 * Mantiene precio, número consecutivo y fecha de emisión.
 *
 * <p>Forma parte de la relación:
 * Persona --(asociación 1)--> BoletoMuseo
 * VentaDelDia --(agregación *)--> BoletoMuseo.
 *
 * @author Alejandro Sanchez Solano
 * @version 1.0
 * @since 2025-09-23
 */
public class BoletoMuseo {

    /** Precio del boleto en colones. */
    private double precio;

    /** Número consecutivo del boleto (único por cada instancia creada). */
    private int numeroBoleto;

    /** Fecha de emisión del boleto en formato ISO (yyyy-MM-dd). */
    private String fechaEmision;

    /** Contador global de boletos emitidos (atributo de clase). */
    private static int contador = 0;

    /**
     * Crea un boleto con el precio indicado. Asigna número consecutivo
     * y fija la fecha de emisión al día actual.
     *
     * @param precio monto del boleto en colones
     */
    public BoletoMuseo(double precio) {
        this.precio = precio;
        contador++;
        this.numeroBoleto = contador;
        this.fechaEmision = establecerFechaEmisionBoleto();
    }

    /**
     * Establece la fecha de emisión en formato ISO (yyyy-MM-dd).
     *
     * @return cadena con la fecha actual formateada
     */
    private String establecerFechaEmisionBoleto() {
        DateTimeFormatter f = DateTimeFormatter.ofPattern("yyyy-MM-dd");
        return LocalDate.now().format(f);
    }

    /**
     * Devuelve el contador global de boletos creados.
     *
     * @return cantidad de boletos (todas las instancias creadas)
     */
    public static int getContador() {
        return contador;
    }

    /**
     * Devuelve el número consecutivo del boleto.
     *
     * @return número del boleto
     */
    public int getNumeroBoleto() {
        return numeroBoleto;
    }

    /**
     * Devuelve el precio del boleto.
     *
     * @return precio en colones
     */
    public double getPrecio() {
        return precio;
    }

    /**
     * Genera una representación legible del boleto.
     *
     * @return detalle multilinea con número, precio y fecha
     */
    public String toString() {
        String msg = "BoletoMuseo\n";
        msg += "  Numero: " + numeroBoleto + "\n";
        msg += "  Precio: " + precio + "\n";
        msg += "  Fecha Emision: " + fechaEmision;
        return msg;
    }
}
